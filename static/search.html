<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Search for products and find exactly what you need.">

  <title>Search Products | EcomV2</title>

  <link rel="stylesheet" href="/static/styles-pro.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Plus+Jakarta+Sans:wght@700;800&display=swap"
    rel="stylesheet">

  <script>
    (function () {
      try {
        var token = localStorage.getItem('token');
        if (!token) window.location.replace('/auth');
      } catch (e) { }
    })();
  </script>
</head>

<body>
  <!-- Header -->
  <header class="site-header-pro">
    <div class="header-top-pro">
      <div class="container-pro">
        <div class="header-top-links">
          <span style="color: var(--text-tertiary);">
            <i class="fa-solid fa-location-dot"></i> Deliver to: <strong style="color: var(--text-primary);">Your
              Location</strong>
          </span>
        </div>
        <div class="header-top-links">
          <a href="#"><i class="fa-solid fa-headset"></i> Customer Service</a>
        </div>
      </div>
    </div>

    <div class="header-main-pro">
      <div class="container-pro">
        <a href="/home" class="logo-pro">EcomV2</a>

        <div class="search-bar-pro">
          <input type="search" id="searchInput" class="search-input-pro" placeholder="Search for products..."
            aria-label="Search">
          <button class="search-btn-pro" id="searchBtn" aria-label="Search"><i
              class="fa-solid fa-magnifying-glass"></i></button>
        </div>

        <div class="header-actions-pro">
          <a href="#" id="userMenuBtn" class="icon-btn-pro" aria-label="Account">
            <i class="fa-regular fa-user"></i>
          </a>
          <a href="/cart" class="icon-btn-pro" aria-label="Cart">
            <i class="fa-solid fa-cart-shopping"></i>
            <span id="cartCount" class="badge-pro"></span>
          </a>
        </div>
      </div>
    </div>

    <div class="header-main-pro"
      style="padding: var(--space-3) 0; background: var(--bg-secondary); border-top: 1px solid var(--border-color);">
      <div class="container-pro">
        <nav class="nav-pro">
          <a href="/home" class="nav-link-pro"><i class="fa-solid fa-house"></i> Home</a>
          <a href="/category?category=computer" class="nav-link-pro"><i class="fa-solid fa-laptop"></i> Computers</a>
          <a href="/category?category=phone" class="nav-link-pro"><i class="fa-solid fa-mobile-screen"></i> Phones</a>
          <a href="/category?category=accessories" class="nav-link-pro"><i class="fa-solid fa-headphones"></i>
            Accessories</a>
          <a href="/search" class="nav-link-pro active"><i class="fa-solid fa-magnifying-glass"></i> Search</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <div class="container-pro" style="padding: var(--space-6) 0 var(--space-16);">
      <nav aria-label="Breadcrumb">
        <ol class="breadcrumb-pro">
          <li><a href="/home"><i class="fa-solid fa-house"></i> Home</a></li>
          <li>Search Results</li>
        </ol>
      </nav>

      <div class="search-page-header">
        <h1 id="searchQuery">Search Results</h1>
        <p id="searchResultCount" class="results-count"></p>
      </div>

      <div class="category-layout">
        <!-- Filters (Shared with category page) -->
        <aside class="filters-sidebar">
          <div class="filters-header">
            <h3><i class="fa-solid fa-sliders"></i> Filters</h3>
            <button class="btn-link" id="clearFilters">Clear All</button>
          </div>

          <div class="filter-group">
            <h4 class="filter-title">Price Range</h4>
            <div class="filter-content">
              <div class="price-inputs">
                <input type="number" id="minPrice" placeholder="$ Min" class="price-input">
                <span style="color: var(--text-muted);">—</span>
                <input type="number" id="maxPrice" placeholder="$ Max" class="price-input">
              </div>
              <button class="btn-pro btn-pro-sm btn-pro-primary" id="applyPrice"
                style="width: 100%; margin-top: var(--space-2);">
                Apply
              </button>
            </div>
          </div>

          <div class="filter-group">
            <h4 class="filter-title">Category</h4>
            <div class="filter-content" id="categoryFilters">
              <!-- Categories loaded dynamically -->
            </div>
          </div>
        </aside>

        <!-- Results -->
        <div class="category-content">
          <div class="category-toolbar">
            <div class="toolbar-left">
              <p class="results-count" id="resultsInfo">Loading...</p>
            </div>
            <div class="toolbar-right">
              <div id="searchSort"></div>
            </div>
          </div>

          <div class="grid-pro grid-pro-3" id="searchResults"></div>

          <div class="text-center mt-8">
            <button id="searchLoadMore" class="btn-pro btn-pro-secondary btn-pro-lg">
              <i class="fa-solid fa-arrow-down"></i> Load More Results
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer-pro">
    <div class="footer-main">
      <div class="container-pro">
        <div class="footer-grid">
          <div class="footer-brand">
            <h3>EcomV2</h3>
            <p>Your one-stop destination for premium electronics.</p>
          </div>
          <div class="footer-col">
            <h4>Shop</h4>
            <div class="footer-links">
              <a href="/home">All Products</a>
            </div>
          </div>
          <div class="footer-col">
            <h4>Support</h4>
            <div class="footer-links">
              <a href="#">Help Center</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="container-pro">
        <div>© 2023 EcomV2. All rights reserved.</div>
      </div>
    </div>
  </footer>

  <script src="/static/analytics.js"></script>
  <script src="/static/shop.js"></script>
  <script>
    Shop.initNav();
    Shop.initSearchPage();

    // Handle search input
    const searchInput = document.getElementById('searchInput');
    document.getElementById('searchBtn')?.addEventListener('click', () => {
      const query = searchInput.value.trim();
      if (query) {
        const url = new URL(window.location);
        url.searchParams.set('q', query);
        window.location.href = url.toString();
      }
    });

    searchInput?.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        document.getElementById('searchBtn')?.click();
      }
    });
  </script>

  <style>
    .search-page-header {
      margin: var(--space-8) 0 var(--space-6);
    }

    .search-page-header h1 {
      font-family: var(--font-display);
      font-size: var(--font-size-4xl);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }

    .search-highlight {
      color: var(--primary-400);
    }
  </style>
</body>

</html>