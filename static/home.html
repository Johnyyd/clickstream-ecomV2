<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EcomV2 – Premium Shopping</title>
  <link rel="stylesheet" href="/static/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    (function () {
      try {
        var token = localStorage.getItem('token');
        if (!token) {
          window.location.replace('/auth');
        }
      } catch (e) { /* ignore */ }
    })();
  </script>
</head>

<body>
  <header class="site-header">
    <a class="logo" href="/home">EcomV2</a>
    <nav>
      <a href="/home" class="active">Home</a>
      <a href="/category?category=computer">Computers</a>
      <a href="/category?category=phone">Phones</a>
      <a href="/category?category=accessories">Accessories</a>
    </nav>
    <div class="header-actions">
      <a href="/search" class="icon-btn" aria-label="Search">
        <i class="fa-solid fa-magnifying-glass"></i>
      </a>
      <a href="/cart" class="icon-btn" aria-label="Cart">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cartCount" style="font-size: 12px; margin-left: 4px; font-weight: 700;"></span>
      </a>
      <a href="#" id="userMenuBtn" class="icon-btn" aria-label="User">
        <i class="fa-regular fa-user"></i>
      </a>
    </div>
  </header>

  <main class="container">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <h1 class="hero-title">Future of Tech is Here</h1>
        <p class="hero-subtitle">Discover the latest gadgets and premium electronics tailored for your lifestyle.</p>
        <a href="#productGrid" class="hero-btn">Shop Now</a>
      </div>
    </section>

    <!-- Categories -->
    <section class="categories-section">
      <div class="section-header">
        <h2 class="section-title">Browse Categories</h2>
      </div>
      <div class="category-grid">
        <a href="/category?category=computer" class="category-card">
          <i class="fa-solid fa-laptop category-icon"></i>
          <span class="category-name">Computers</span>
        </a>
        <a href="/category?category=phone" class="category-card">
          <i class="fa-solid fa-mobile-screen category-icon"></i>
          <span class="category-name">Phones</span>
        </a>
        <a href="/category?category=accessories" class="category-card">
          <i class="fa-solid fa-headphones category-icon"></i>
          <span class="category-name">Accessories</span>
        </a>
        <a href="/category?category=camera" class="category-card">
          <i class="fa-solid fa-camera category-icon"></i>
          <span class="category-name">Cameras</span>
        </a>
      </div>
    </section>

    <!-- Featured Products -->
    <section id="featuredSection" style="margin-bottom: 64px;">
      <div class="section-header">
        <h2 class="section-title">Featured Products</h2>
        <div id="homeSort"></div>
      </div>

      <div id="categoryFilters" class="category-filters" style="display:none;"></div>
      <!-- Hidden but kept for logic if needed -->

      <div id="productGrid" class="grid"></div>

      <div class="toolbar-row" style="justify-content: center; margin-top: 32px;">
        <button id="homeLoadMore" class="hero-btn" style="font-size: 16px; padding: 10px 24px;">Load more</button>
        <span id="homeInfo" class="text-muted" style="display:none;"></span>
      </div>
    </section>

    <!-- Recommendations -->
    <section id="recoWrap" style="margin-top:24px; display:none;">
      <div class="section-header">
        <h2 class="section-title">Recommended for you</h2>
      </div>
      <div id="recoGrid" class="grid"></div>
      <div class="toolbar-row" style="justify-content: center; margin-top: 32px;">
        <button id="recoLoadMore" class="hero-btn" style="font-size: 16px; padding: 10px 24px; display: none;">Load
          more</button>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <h3>EcomV2</h3>
          <p>Your one-stop destination for premium electronics and gadgets. Quality guaranteed.</p>
        </div>
        <div class="footer-col">
          <h4>Shop</h4>
          <div class="footer-links">
            <a href="/home">All Products</a>
            <a href="/category?category=computer">Computers</a>
            <a href="/category?category=phone">Phones</a>
            <a href="/search">Search</a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Support</h4>
          <div class="footer-links">
            <a href="#">Help Center</a>
            <a href="#">Order Status</a>
            <a href="#">Returns</a>
            <a href="#">Contact Us</a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Legal</h4>
          <div class="footer-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Cookie Policy</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div>© 2023 EcomV2. All rights reserved.</div>
        <div style="display:flex; gap:16px;">
          <a href="#" style="color:var(--muted)"><i class="fa-brands fa-twitter"></i></a>
          <a href="#" style="color:var(--muted)"><i class="fa-brands fa-instagram"></i></a>
          <a href="#" style="color:var(--muted)"><i class="fa-brands fa-github"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <script src="/static/analytics.js"></script>
  <script src="/static/shop.js"></script>
  <script>
    Shop.initNav();
    // Shop.renderCategories(); // We hardcoded categories for better design control
    Shop.loadFeaturedProducts();
    Shop.loadRecommendations();
  </script>
</body>

</html>